<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="color-scheme" content="light dark">
	<link rel="icon" href="data:,">
	<title>Installing OpenBSD on Linveo KVM VPS</title>
	<link href="/index.rss" type="application/rss+xml" rel="alternate" title="RSS feed for blog posts" />
	<link rel="stylesheet" href="/public/style.css?v=1.0">
</head>

<header id="top">
	<nav>
		<a href="/"><b>vaughn.li</b></a><span> | </span><a href="#menu">Menu</a>
	</nav>
</header>

<main>
<h1 id="installing-openbsd-on-linveo-kvm-vps">Installing OpenBSD on Linveo KVM VPS</h1>

<p>2024-10-21</p>

<p>I recently came across an amazing deal for a VPS on <a href="https://billing.linveo.com/order/forms/a/MTM4Ng==">Linveo</a>. For just $15 a year they provide:</p>

<ul>
  <li>AMD KVM 1GB</li>
  <li>1024 MB RAM</li>
  <li>1 CPU Core</li>
  <li>25 GB NVMe SSD</li>
  <li>2000 GB Bandwidth</li>
</ul>

<p>It’s a pretty <a href="https://lowendtalk.com/discussion/193886/linveo-com-amd-ryzen-7950x-kvm-vps-with-nvme-disk-from-15-year-now-with-10gbit-in-texas">great deal</a> and I suggest you look more into it if you’re interested! But this post is more focused on setting up OpenBSD via the custom ISO option in the KVM dashboard. Linveo already provides several Linux OS options, along with FreeBSD by default (which is great!). Since there is no OpenBSD template we need to do things manually.</p>

<h2 id="getting-started">Getting Started</h2>

<p>Once you have your initial VPS up and running, login to the main dashboard and navigate to the <strong>Media</strong> tab. Under CD/DVD-ROM you’ll want to click “Custom CD/DVD” and enter the direct link to the <code>install76.iso</code>:</p>

<pre><code class="language-sh">https://cdn.openbsd.org/pub/OpenBSD/7.6/i386/install76.iso
</code></pre>

<blockquote>
  <p>Note: you will need to use the <code>i386</code> build in order for this to work</p>
</blockquote>

<figure>
<img src="/public/images/linveo-1.png" alt="The Linveo Media Dashboard" />
<figcaption>The "Media" tab of the Linveo Dashboard. Use the official ISO link and set the Boot Order to CD/DVD.</figcaption>
</figure>

<p>Select “Insert”, then set your <strong>Boot Order</strong> to CD/DVD and click “Apply”. Once complete, <strong>Restart</strong> your server.</p>

<h2 id="installing-via-vnc">Installing via VNC</h2>

<p>With the server rebooting, jump over to <strong>Options</strong> and click on “Browser VNC”
to launch the web-based VNC client. From here we will boot into the OpenBSD
installer and get things going!</p>

<p>Follow the installer as you normally would when installing OpenBSD (if you’re
unsure, I have a <a href="/wiki/openbsd/installation/">step-by-step walkthrough</a>) until
you reach the IPv4 selection. At this point you will want to input your servers
IPv4 and IPv6 IPs found under your <strong>Network</strong> section of your dashboard.</p>

<p>Next you will want to set the IPv6 route to first default listed option (not
“none”). After that is complete, choose <code>cd0</code> for your install media (don’t
worry about <code>http</code> yet).</p>

<p>Continue with the rest of the install (make users if desired, etc) until it
tells you to reboot the machine. Go back to the Linveo Dashboard, switch
your <strong>Boot Order</strong> back to “Harddrive” and reboot the machine directly.</p>

<h2 id="booting-into-openbsd">Booting into OpenBSD</h2>

<p>Load into the VNC client again. If you did everything correctly you should be
greeted with the OpenBSD login prompt. There are a few tweaks we still need to
make, so login as the <code>root</code> user.</p>

<p>Remember how we installed our sets directly from the <code>cd0</code>? We’ll want to
change that. Since we are running OpenBSD “virtually” through <code>KVM</code>, our target
network interface will be <code>vio0</code>.</p>

<p>Edit the <code>/etc/hostname.vio0</code> file and add the following:</p>

<pre><code class="language-sh">dhcp
!route add default &lt;your_gateway_ip&gt;
</code></pre>

<p>The <code>&lt;your_gateway_ip&gt;</code> can be found under the <strong>Network</strong> tab of your
dashboard.</p>

<p>The next file we need to tweak is <code>/etc/resolv.conf</code>. Add the following to it:</p>

<pre><code class="language-sh">nameserver 8.8.8.8
nameserver 1.1.1.1
</code></pre>

<p>These nameservers are based on your selected IPs under the Resolvers section of
<strong>Network</strong> in the Linveo dashboard. Change these as you see fit, so long as
they match what you place in the <code>resolve.conf</code> file.</p>

<p>Finally, the last file we need to edit is <code>/etc/pf.conf</code>. Like the others, add
the following:</p>

<pre><code class="language-sh">pass out proto { tcp, udp } from any to any port 53
</code></pre>

<h2 id="final-stretch">Final Stretch</h2>

<p>Now just reboot the server. Log back in as your desired user and everything
should be working as expected! You can perform a simple test to check:</p>

<pre><code class="language-sh">ping openbsd.org
</code></pre>

<p>This should work - meaning your network is up and running! Now you’re free
to enjoy the beauty that is OpenBSD.</p>
</main>

<footer role="contentinfo">
    <nav id="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/index.rss">RSS</a></li>
            <li><a href="#top">&uarr; Top</a></li>
        </ul>
    </nav>
    <small>
        Built with <a href="https://wruby.btxx.org">wruby</a> <br>
        Running on <a href="https://openbsd.org">OpenBSD</a> via <a href="https://billing.linveo.com/order/forms/a/MTM4Ng==">Linveo</a><br>
        Supporter of <a href="https://nextdns.io/?from=74d3p3h8">NextDNS</a> & <a href="https://usefathom.com/ref/DKHJVX">Fathom Analytics</a><br/>
        The content for this site is <a
          href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a><br>
        The <a href="https://git.sr.ht/~bt/btxx.org">code for this site</a>
        is <a href="https://git.sr.ht/~bt/btxx.org/tree/master/item/LICENSE">MIT</a>
    </small>
</footer>
