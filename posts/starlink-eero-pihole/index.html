<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="color-scheme" content="light dark">
	<link rel="icon" href="data:,">
	<title>Setting Up Pi-Hole with Eero on Starlink</title>
	<link href="/index.rss" type="application/rss+xml" rel="alternate" title="RSS feed for blog posts" />
	<link rel="stylesheet" href="/public/style.css?v=1.0">
</head>

<header id="top">
	<nav>
		<a href="/"><b>vaughn.li</b></a><span> | </span><a href="#menu">Menu</a>
	</nav>
</header>

<main>
<h1 id="setting-up-pi-hole-with-eero-on-starlink">Setting Up Pi-Hole with Eero on Starlink</h1>

<p>2024-07-24</p>

<p>A couple years ago I wrote about <a href="/posts/eero/">setting up a standard pi-hole server with eero WiFi</a> but since that time I have swapped out my “cell tower” internet for Starlink. The speed improvement has been incredible and there is no looking back at regular, rural internet. With the switch over minor adjustments needed to be made, so I took this as an opportunity to rebuild everything from scratch. A nice, clean slate.</p>

<h2 id="required-equipment">Required Equipment</h2>

<p>For the purposes of the tutorial, I will assume that you have:</p>

<ul>
  <li>Starlink setup and running
    <ul>
      <li>The official Starlink Ethernet adapter (if your model requires it)</li>
    </ul>
  </li>
  <li>Eero mesh WiFi setup and running</li>
  <li>An Ethernet hardware switch</li>
  <li>A Raspberry Pi Zero (with WiFi preferred)</li>
  <li>(Optional) Ethernet connection HAT for the RPi0</li>
</ul>

<p>It might sound like a lot, but it really isn’t that complex - I promise!</p>

<h2 id="getting-started">Getting Started</h2>

<p>If you have the eero mesh network setup already, I will assume you have gone through the following steps:</p>

<ol>
  <li>Placed Starlink into bypass mode</li>
  <li>Connected your Starlink router to the Ethernet hardware switch</li>
  <li>Connected your Ethernet switch to your main eero router</li>
</ol>

<p>With all of that working properly, our next step is to configure our Raspberry Pi device.</p>

<h2 id="flashing-our-pi">Flashing Our Pi</h2>

<p>Download the <a href="https://downloads.raspberrypi.com/raspios_lite_armhf/images/raspios_lite_armhf-2024-07-04/2024-07-04-raspios-bookworm-armhf-lite.img.xz">Raspberry Pi Lite OS</a>. Then, connect your desired microSD card to your computer and launch the official Raspberry Pi Imager.</p>

<ul>
  <li>Select “Custom Image” use the Raspberry Pi Lite OS you just downloaded</li>
  <li>Choose your device (in this case the microSD)</li>
</ul>

<p><img src="/public/images/starlink-pihole-1.png" alt="Raspberry Pi Imager showing the image and device output to write the files" /></p>

<p>When you click <code>Next</code>, you will be prompted to edit settings. Click <code>Yes</code>, fill out your custom details below and enable <code>ssh</code>:</p>

<p><img src="/public/images/starlink-pihole-2.png" alt="Raspberry Pi Imager showing customization options" /></p>

<blockquote>
  <p><strong>Note:</strong> If you do not have an Ethernet HAT or adapter, but sure to add your WiFi details in the settings so your device will connect to your local network on boot.</p>
</blockquote>

<p><img src="/public/images/starlink-pihole-3.png" alt="Raspberry Pi Imager enabling SSH" /></p>

<p>Click <code>Save</code> and then proceed to write to the device.</p>

<p><img src="/public/images/starlink-pihole-4.png" alt="Raspberry Pi Imager writing the image to the microSD card" /></p>

<p>After it completes, eject the microSD card and get your Pi device ready!</p>

<h2 id="connecting-our-pi">Connecting Our Pi</h2>

<p>Before we try to <code>ssh</code> into our Pi, we need to set things up properly on the hardware side of things. You will need to connect an Ethernet cable from your Raspberry Pi to a port on your main eero router. If you don’t have an Ethernet HAT (or adapter cord) you can connect via WiFi once the Pi is powered on.</p>

<p>Take a look at the diagram below for reference.</p>

<p><img src="/public/images/starlink-pihole-setup.webp" alt="Diagram showing a Starlink router, connected with an Eero device with a pi-hole" /></p>

<p>Once everything is setup, plug-in your Raspberry Pi and give it a little bit of time to boot. Once you see a nice solid green LED, it’s time to go back to your local computer’s terminal.</p>

<h2 id="installing-pi-hole">Installing Pi-Hole</h2>

<p>Once at your terminal, connect to your Raspberry Pi:</p>

<pre><code class="language-sh"># if you set a hostname
ssh pi@raspberrypi.local

# or just the IP
ssh 192.168.*.*
</code></pre>

<p>Then enter the username and password you created when you initially configured the microSD image. Once you are connected directly to the Pi, it’s best to check for updates:</p>

<pre><code class="language-sh">sudo apt update
sudo apt upgrade
</code></pre>

<p>Now for the easy part - installing Pi-Hole:</p>

<pre><code class="language-sh">curl -sSL https://install.pi-hole.net | bash
</code></pre>

<p>Just follow the guided setup (it is pretty straight-forward):</p>

<p><img src="/public/images/starlink-pihole-5.png" alt="Pi-Hole installer, selecting DNS" /></p>

<p>Select <code>Yes</code> when asked to install the Web Admin Interface:</p>

<p><img src="/public/images/starlink-pihole-6.png" alt="Pi-Hole installer, choosing to install the web admin interface" /></p>

<p><img src="/public/images/starlink-pihole-7.png" alt="Pi-Hole installer, terminal showing the web interface installing" /></p>

<p>Once that completes you’ll be shown your Pi-Hole’s IPv4 and IPv6 addresses. <strong>Keep note of these for later</strong>.</p>

<h2 id="configuring-the-eero-app">Configuring the Eero App</h2>

<ol>
  <li>Open the Eero app (iOS or Android)</li>
  <li>Navigate to <code>Settings</code> &gt; <code>Network Settings</code> &gt; <code>DNS</code></li>
  <li>Select Customized DNS and enter both your saved <code>IPv4</code> / <code>IPv6</code> values</li>
  <li>Eero will prompt you to reboot your network - do it</li>
</ol>

<p>Next we need to add your Pi-hole’s address as an port forward reservation:</p>

<ol>
  <li>In the Eero app, navigate to <code>Settings</code> &gt; <code>Network Settings</code> &gt; <code>Reservations &amp; port forwarding</code></li>
  <li>The Pi-Hole device should be listed automatically (if not, enter the Pi-Hole’s IP manually)</li>
  <li>Save your changes</li>
</ol>

<p>You might be required to reboot your network again. Once that is complete we can now access our Pi-Hole’s web interface!</p>

<h2 id="pi-hole-interface">Pi-Hole Interface</h2>

<p>Navigate to the Pi-Hole’s IP (or the hostname you created for it) on your local computer. From here you can tweak the device settings as much or as little as you’d like! Enjoy ad-free and tracker-free browsing!</p>

<p><img src="/public/images/starlink-pihole-8.png" alt="Pi-Hole running locally in the browser" /></p>
</main>

<footer role="contentinfo">
    <nav id="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/index.rss">RSS</a></li>
            <li><a href="#top">&uarr; Top</a></li>
        </ul>
    </nav>
    <small>
        Built with <a href="https://wruby.btxx.org">wruby</a> <br>
        Running on <a href="https://openbsd.org">OpenBSD</a> via <a href="https://billing.linveo.com/order/forms/a/MTM4Ng==">Linveo</a><br>
        Supporter of <a href="https://nextdns.io/?from=74d3p3h8">NextDNS</a> & <a href="https://usefathom.com/ref/DKHJVX">Fathom Analytics</a><br/>
        The content for this site is <a
          href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a><br>
        The <a href="https://git.sr.ht/~bt/btxx.org">code for this site</a>
        is <a href="https://git.sr.ht/~bt/btxx.org/tree/master/item/LICENSE">MIT</a>
    </small>
</footer>
