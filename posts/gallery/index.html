<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="color-scheme" content="light dark">
	<link rel="icon" href="data:,">
	<title>Simplifying the Craigslist Gallery</title>
	<link href="/index.rss" type="application/rss+xml" rel="alternate" title="RSS feed for blog posts" />
	<link rel="stylesheet" href="/public/style.css?v=1.0">
</head>

<header id="top">
	<nav>
		<a href="/"><b>vaughn.li</b></a><span> | </span><a href="#menu">Menu</a>
	</nav>
</header>

<main>
<h1 id="simplifying-the-craigslist-gallery">Simplifying the Craigslist Gallery</h1>

<p>2022-10-03</p>

<p><strong>This article was updated on October 11, 2022</strong></p>

<p>I‚Äôm a big fan of <a href="https://craigslist.org">craigslist.org</a> and the overall UX used throughout their application. My own website is an ever-changing example of ‚Äúbrutalist‚Äù or minimalist design, so I‚Äôm always inspired by existing web apps out in the wild using the same principles.</p>

<p>One nitpick I have with the current craigslist design is their approach to image galleries inside their listings. They use a chunk of bloated JavaScript (more than <code>380kB</code> total) to render something as simple as a collection of images. This seems like overkill to me.</p>

<figure>
    <img src="/public/images/craigslist-gallery.webp" alt="Current craigslist.org gallery view" />
    <figcaption>The current look of image galleries on craigslist</figcaption>
</figure>

<h2 id="simplifying-things">Simplifying Things</h2>

<p>My first suggestion would be to remove JavaScript altogether. We can replicate most of the required features with just HTML &amp; CSS. Let‚Äôs start with our core HTML structure:</p>

<h3 id="html">HTML</h3>

<pre><code>&lt;div class="gallery-wrapper"&gt;
    &lt;div class="full-size"&gt;
        &lt;a name="p1"&gt;&lt;img src="https://picsum.photos/id/100/400" alt="Picture 1" class="gallery-item"&gt;&lt;/a&gt;
        &lt;a name="p2"&gt;&lt;img src="https://picsum.photos/id/101/400" alt="Picture 2" class="gallery-item"&gt;&lt;/a&gt;
        &lt;a name="p3"&gt;&lt;img src="https://picsum.photos/id/106/400" alt="Picture 3" class="gallery-item"&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="thumbnails"&gt;
        &lt;a href="#p1"&gt;&lt;img src="https://picsum.photos/id/100/100" alt="Picture 1 Thumbnail" class="thumbnail-1"&gt;&lt;/a&gt;
        &lt;a href="#p2"&gt;&lt;img src="https://picsum.photos/id/101/100" alt="Picture 2 Thumbnail" class="thumbnail-2"&gt;&lt;/a&gt;
        &lt;a href="#p3"&gt;&lt;img src="https://picsum.photos/id/106/100" alt="Picture 3 Thumbnail" class="thumbnail-3"&gt;&lt;/a&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Here we are placing the full-size gallery images directly inside a single <code>div.full-size</code> as - you guessed it - <code>img</code> elements. This already helps us avoid the pitfall of building out spaghetti <code>div</code> containers.</p>

<p>Below this parent container we have another element, <code>div.thumbnails</code>, which will be used for our separate, smaller thumbnail versions of our main images. The most important items to note are the associated <code>ahref</code> elements surrounding each <code>img</code> element. By setting the <code>id</code> parameter on our thumbnails to match that of the <code>name</code> on our full-sized images, we can ‚Äúscroll‚Äù the proper image into view without the need for JavaScript.</p>

<p>Now for the <em>fancy</em> stuff - the CSS!</p>

<h3 id="css">CSS</h3>

<pre><code>.gallery-wrapper {
    position: relative;
}
.gallery-wrapper:before {
    background: rgba(255,255,255,0.8);
    content: "Scroll / Swipe ü°¢";
    display: block;
    padding: 5px;
    position: relative;
}

.full-size {
    display: flex;
    scroll-snap-type: x mandatory;
    margin-bottom: 10px;
    max-width: 400px;
    overflow-x: scroll;
}
.full-size .gallery-item {
    scroll-snap-align: start;
}

.thumbnails img {
    cursor: pointer;
    margin-right: 10px;
}
</code></pre>

<p>Okay, so it isn‚Äôt <em>that</em> fancy. It‚Äôs actually very basic, which is exactly what we were going for. The images are ‚Äústacked‚Äù inline thanks to the parent container being set to <code>display: flex</code>, even though it has a set width of <code>600px</code>. The included <code>scroll-snap-type: x mandatory</code> tells the browser to allow users to scroll/swipe horizontally through the parent container.</p>

<p>The last important piece of this CSS is the <code>scroll-snap-align: start</code> added to the individual image elements. This parameter <em>snaps</em> the next image into the starting position of the parent container on scroll, giving a behavior users have come to expect from media galleries.</p>

<p>You will also see the included <code>:before</code> pseudo element attached to the main <code>.gallery-wrapper</code> element. This isn‚Äôt <em>required</em> but it certainly helps from a UX standpoint.</p>

<h2 id="live-demo">Live Demo</h2>

<p>Check out the embedded CodePen below to see it in action. More functionality could always be built on top of this, such as rendering all images dynamically on ‚Äúbuild‚Äù, but for a starting point I think it‚Äôs great.</p>

<p><a href="https://codepen.io/bradleytaunt/pen/ExLRyXz">Live CodePen Example</a></p>
</main>

<footer role="contentinfo">
    <nav id="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/index.rss">RSS</a></li>
            <li><a href="#top">&uarr; Top</a></li>
        </ul>
    </nav>
    <small>
        Built with <a href="https://wruby.btxx.org">wruby</a> <br>
        Running on <a href="https://openbsd.org">OpenBSD</a> via <a href="https://billing.linveo.com/order/forms/a/MTM4Ng==">Linveo</a><br>
        Supporter of <a href="https://nextdns.io/?from=74d3p3h8">NextDNS</a> & <a href="https://usefathom.com/ref/DKHJVX">Fathom Analytics</a><br/>
        The content for this site is <a
          href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a><br>
        The <a href="https://git.sr.ht/~bt/btxx.org">code for this site</a>
        is <a href="https://git.sr.ht/~bt/btxx.org/tree/master/item/LICENSE">MIT</a>
    </small>
</footer>
