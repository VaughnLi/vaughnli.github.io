<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="color-scheme" content="light dark">
	<link rel="icon" href="data:,">
	<title>Basic Gulp Build for Sass</title>
	<link href="/index.rss" type="application/rss+xml" rel="alternate" title="RSS feed for blog posts" />
	<link rel="stylesheet" href="/public/style.css?v=1.0">
</head>

<header id="top">
	<nav>
		<a href="/"><b>vaughn.li</b></a><span> | </span><a href="#menu">Menu</a>
	</nav>
</header>

<main>
<h1 id="basic-gulp-build-for-sass">Basic Gulp Build for Sass</h1>

<p>2019-01-15</p>

<p>Some designers might shy away from build tools when first starting out and I can understand the reasoning - task runners like <code>gulp</code> and <code>grunt</code> can seem daunting at first. So, I’ve decided to showcase my go-to setup for <code>gulp</code> and explain what the heck it does step-by-step.</p>

<p>Here is the final <code>gulp.js</code> file in all it’s glory:</p>

<pre><code class="language-js">var gulp = require('gulp');
var shell = require('gulp-shell');
var sass = require('gulp-sass');

/* Build and watch Jekyll (change this task to whatever you need) */
gulp.task('generate', shell.task('jekyll serve'));

/* Compile SCSS files to CSS */
gulp.task('styles', function () {
  return gulp.src('_includes/assets/sass/styles.scss')
    .pipe(sass({
      outputStyle: 'compressed'
    }).on('error', sass.logError))
    .pipe(gulp.dest('_includes/assets/css/'));
});

/* Compile the assets */
gulp.task('assets', gulp.parallel(
  'styles'
));

/* Build */
gulp.task('build', gulp.series(
  'assets',
    generate'
));
</code></pre>

<p>Trust me, it’s not complicated at all.</p>

<h2 id="grabbing-what-we-need">Grabbing what we need</h2>

<p>For our basic build file we are going to need only three modules: <code>gulp</code>, <code>gulp-shell</code> and <code>gulp-sass</code>.</p>

<pre><code class="language-js">var gulp = require('gulp');
var shell = require('gulp-shell');
var sass = require('gulp-sass');
</code></pre>

<h4 id="gulp">gulp</h4>
<p>This is the streaming build system, without it we can’t do anything else.</p>

<h4 id="gulp-shell">gulp-shell</h4>
<p>A gulp command line interface for us to interact with our terminal.</p>

<h4 id="gulp-sass">gulp-sass</h4>
<p>Required for gulp to compile Sass into vanilla CSS.</p>

<h4 id="bonus-tasks">Bonus tasks</h4>

<p>You can also toss in <code>gulp-minify</code> to clean-up any JavaScript you might be using, but for this example we're just going to keep things simple and focus on Sass only.</p>

<p class="no-margin">Maybe I'll write about my <code>js</code> build workflow in a future article.</p>

<h2 id="generating-the-build">Generating the build</h2>

<p>Our first step is to create the default task that will generate our build. In this example we are making the assumption that we’re building a Jekyll website (but you can place any build command here):</p>

<pre><code class="language-sh">gulp.task('generate', shell.task('jekyll serve'));
</code></pre>

<p>Don’t worry if this <code>generate</code> isn’t clear, we come back to that later.</p>

<h2 id="processing-our-pre-processor">Processing our pre-processor</h2>

<p>We will name this next task <code>styles</code> since that’s what it outputs - our styling. We start by telling gulp where our main <code>scss</code> directory is:</p>

<pre><code class="language-js">/* Change this directory to match yours */
return gulp.src('_includes/assets/sass/styles.scss')
</code></pre>

<p>This next piece tells the plugin to compress our final compiled CSS, log any errors if there are issues with the build and then export it to our destination directory:</p>

<pre><code class="language-js">.pipe(sass({
  outputStyle: 'compressed'
}).on('error', sass.logError))

/* Change this to your destination directory */
.pipe(gulp.dest('_includes/assets/css/'));
</code></pre>

<h2 id="building-our-assets">Building our assets</h2>

<p>This step isn’t 100% needed, but I like to include it for when more assets need to be added (minifying JavaScript, compressing images, etc)</p>

<pre><code class="language-js">/*
Compile the assets
*/
gulp.task('assets', gulp.parallel(
  'styles'
));
</code></pre>

<h2 id="altogether-now">Altogether now!</h2>

<p>Now we add a task that runs all other tasks in our gulp file (in this case it will run both <code>assets</code> and <code>generate</code>)</p>

<pre><code class="language-js">/*
Build
*/
gulp.task('build', gulp.series(
    'assets',
    'generate'
));
</code></pre>

<p>And that’s it - we’re done! A very basic <code>gulp</code> build for compiling Sass.</p>

</main>

<footer role="contentinfo">
    <nav id="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/index.rss">RSS</a></li>
            <li><a href="#top">&uarr; Top</a></li>
        </ul>
    </nav>
    <small>
        Built with <a href="https://wruby.btxx.org">wruby</a> <br>
        Running on <a href="https://openbsd.org">OpenBSD</a> via <a href="https://billing.linveo.com/order/forms/a/MTM4Ng==">Linveo</a><br>
        Supporter of <a href="https://nextdns.io/?from=74d3p3h8">NextDNS</a> & <a href="https://usefathom.com/ref/DKHJVX">Fathom Analytics</a><br/>
        The content for this site is <a
          href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a><br>
        The <a href="https://git.sr.ht/~bt/btxx.org">code for this site</a>
        is <a href="https://git.sr.ht/~bt/btxx.org/tree/master/item/LICENSE">MIT</a>
    </small>
</footer>
